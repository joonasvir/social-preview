<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Social Preview</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --bg: #000;
      --text: #e7e9ea;
      --text-secondary: #71767b;
      --border: #2f3336;
      --accent: #1d9bf0;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      background: #16181c;
      color: var(--text);
      min-height: 100vh;
      display: flex;
    }

    /* Player Sidebar */
    .player-sidebar {
      width: 80px;
      padding: 16px 12px;
      border-right: 1px solid var(--border);
      background: #000;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      height: 100vh;
    }

    .player-sidebar h2 {
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: var(--text-secondary);
      margin-bottom: 8px;
    }

    .player-avatar {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      object-fit: cover;
      cursor: pointer;
      border: 2px solid transparent;
      transition: all 0.2s;
      background: var(--border);
    }

    .player-avatar:hover {
      border-color: var(--text-secondary);
      transform: scale(1.05);
    }

    .player-avatar.active {
      border-color: var(--accent);
      box-shadow: 0 0 0 2px rgba(29, 155, 240, 0.3);
    }

    .player-name {
      font-size: 9px;
      color: var(--text-secondary);
      text-align: center;
      max-width: 60px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      margin-top: -4px;
    }

    .player-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
    }

    .players-list {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    /* Background Settings */
    .bg-settings {
      margin-top: auto;
      padding-top: 16px;
      border-top: 1px solid var(--border);
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .bg-settings h3 {
      font-size: 9px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: var(--text-secondary);
      text-align: center;
    }

    .bg-option {
      width: 40px;
      height: 40px;
      border-radius: 8px;
      cursor: pointer;
      border: 2px solid transparent;
      transition: all 0.2s;
      margin: 0 auto;
    }

    .bg-option:hover {
      border-color: var(--text-secondary);
      transform: scale(1.05);
    }

    .bg-option.active {
      border-color: var(--accent);
    }

    .bg-option.gradient-dark {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f0f23 100%);
    }

    .bg-option.gradient-purple {
      background: linear-gradient(135deg, #1a0a2e 0%, #2d1b4e 50%, #1a0a2e 100%);
    }

    .bg-option.gradient-blue {
      background: linear-gradient(135deg, #0a1628 0%, #1a3a5c 50%, #0a1628 100%);
    }

    .bg-option.gradient-warm {
      background: linear-gradient(135deg, #1a1210 0%, #2d1f1a 50%, #1a1210 100%);
    }

    .bg-option.media-echo {
      background: conic-gradient(from 180deg, #1d9bf0, #f91880, #00ba7c, #1d9bf0);
      position: relative;
      overflow: hidden;
    }

    .bg-option.media-echo::after {
      content: '';
      position: absolute;
      inset: 3px;
      background: #000;
      border-radius: 5px;
    }

    .bg-label {
      font-size: 8px;
      color: var(--text-secondary);
      text-align: center;
      margin-top: -4px;
    }

    /* Editor Panel */
    .editor {
      width: 320px;
      padding: 24px;
      border-right: 1px solid var(--border);
      overflow-y: auto;
      height: 100vh;
      background: #000;
    }

    .editor h1 {
      font-size: 20px;
      margin-bottom: 24px;
      font-weight: 700;
    }

    .field {
      margin-bottom: 20px;
    }

    .field label {
      display: block;
      font-size: 13px;
      color: var(--text-secondary);
      margin-bottom: 8px;
      font-weight: 500;
    }

    .field input,
    .field textarea {
      width: 100%;
      padding: 12px;
      background: #16181c;
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text);
      font-size: 15px;
      font-family: inherit;
    }

    .field input:focus,
    .field textarea:focus {
      outline: none;
      border-color: var(--accent);
    }

    .field textarea {
      resize: vertical;
      min-height: 140px;
    }

    .upload-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      width: 100%;
      padding: 12px;
      background: transparent;
      border: 1px dashed var(--border);
      border-radius: 8px;
      color: var(--text-secondary);
      font-size: 14px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .upload-btn:hover {
      border-color: var(--accent);
      color: var(--accent);
    }

    .upload-btn.has-file {
      border-style: solid;
      border-color: var(--accent);
      color: var(--accent);
    }

    /* Media type toggle */
    .media-type-toggle {
      display: flex;
      gap: 8px;
      margin-bottom: 12px;
    }

    .media-type-btn {
      flex: 1;
      padding: 8px 12px;
      background: transparent;
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text-secondary);
      font-size: 13px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .media-type-btn.active {
      border-color: var(--accent);
      color: var(--accent);
      background: rgba(29, 155, 240, 0.1);
    }

    .clear-media-btn {
      width: 100%;
      padding: 8px;
      margin-top: 8px;
      background: transparent;
      border: 1px solid #f4212e;
      border-radius: 8px;
      color: #f4212e;
      font-size: 13px;
      cursor: pointer;
    }

    .clear-media-btn:hover {
      background: rgba(244, 33, 46, 0.1);
    }

    /* Preview Panel */
    .preview-container {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 40px;
      position: relative;
      overflow: hidden;
    }

    .preview-bg {
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f0f23 100%);
      transition: background 0.5s ease;
    }

    .preview-bg.gradient-dark {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f0f23 100%);
    }

    .preview-bg.gradient-purple {
      background: linear-gradient(135deg, #1a0a2e 0%, #2d1b4e 50%, #1a0a2e 100%);
    }

    .preview-bg.gradient-blue {
      background: linear-gradient(135deg, #0a1628 0%, #1a3a5c 50%, #0a1628 100%);
    }

    .preview-bg.gradient-warm {
      background: linear-gradient(135deg, #1a1210 0%, #2d1f1a 50%, #1a1210 100%);
    }

    .media-echo-bg {
      position: absolute;
      inset: -50%;
      background-size: cover;
      background-position: center;
      filter: blur(100px) saturate(1.5) brightness(0.4);
      opacity: 0;
      transition: opacity 0.5s ease;
      transform: scale(1.5);
    }

    .media-echo-bg.active {
      opacity: 1;
    }

    .preview-noise {
      position: absolute;
      inset: 0;
      opacity: 0.03;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
      pointer-events: none;
    }

    /* Tweet Styles */
    .tweet {
      background: var(--bg);
      width: 100%;
      max-width: 600px;
      padding: 16px 20px;
      border-radius: 16px;
      border: 1px solid var(--border);
      position: relative;
      z-index: 1;
    }

    .tweet-header {
      display: flex;
      align-items: flex-start;
      margin-bottom: 12px;
    }

    .avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;
      margin-right: 12px;
      flex-shrink: 0;
      background: var(--border);
    }

    .tweet-header-content {
      flex: 1;
      min-width: 0;
    }

    .tweet-header-top {
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .display-name {
      font-weight: 700;
      font-size: 15px;
      color: var(--text);
    }

    .verified-badge {
      width: 18px;
      height: 18px;
      flex-shrink: 0;
    }

    .username {
      font-size: 15px;
      color: var(--text-secondary);
    }

    .tweet-header-right {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-left: auto;
    }

    .subscribe-btn {
      padding: 6px 16px;
      border: 1px solid #536471;
      border-radius: 9999px;
      background: transparent;
      color: var(--text);
      font-size: 14px;
      font-weight: 700;
      cursor: pointer;
    }

    .icon-btn {
      width: 34px;
      height: 34px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-secondary);
      border-radius: 50%;
      cursor: pointer;
    }

    .tweet-content {
      font-size: 17px;
      line-height: 1.4;
      color: var(--text);
      white-space: pre-wrap;
      word-wrap: break-word;
      margin-bottom: 12px;
    }

    .tweet-media {
      border-radius: 16px;
      overflow: hidden;
      margin-bottom: 12px;
      position: relative;
      background: #16181c;
    }

    .tweet-media img,
    .tweet-media video {
      width: 100%;
      display: block;
      max-height: 510px;
      object-fit: cover;
      cursor: pointer;
    }

    .tweet-media video:fullscreen {
      object-fit: contain;
    }

    .video-duration {
      position: absolute;
      bottom: 12px;
      left: 12px;
      background: rgba(0, 0, 0, 0.75);
      color: white;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 13px;
      font-weight: 500;
    }

    .video-play-icon {
      position: absolute;
      bottom: 12px;
      right: 12px;
      width: 0;
      height: 0;
      border-left: 12px solid white;
      border-top: 7px solid transparent;
      border-bottom: 7px solid transparent;
    }

    .tweet-meta {
      display: flex;
      align-items: center;
      gap: 4px;
      font-size: 15px;
      color: var(--text-secondary);
      padding: 12px 0;
      border-bottom: 1px solid var(--border);
    }

    .tweet-meta .separator {
      margin: 0 2px;
    }

    .tweet-meta .views-count {
      color: var(--text);
      font-weight: 700;
    }

    .tweet-actions {
      display: flex;
      justify-content: space-between;
      padding: 12px 0;
      max-width: 425px;
    }

    .action-item {
      display: flex;
      align-items: center;
      gap: 4px;
      color: var(--text-secondary);
      font-size: 13px;
      cursor: pointer;
    }

    .action-item svg {
      width: 18px;
      height: 18px;
    }

    .action-item.replies:hover { color: var(--accent); }
    .action-item.retweets:hover { color: #00ba7c; }
    .action-item.likes:hover { color: #f91880; }
    .action-item.bookmarks:hover { color: var(--accent); }
    .action-item.share:hover { color: var(--accent); }

    .hidden {
      display: none !important;
    }

    /* Inline editable styles */
    .editable {
      cursor: pointer;
      border-radius: 4px;
      transition: background 0.15s;
    }

    .editable:hover {
      background: rgba(255, 255, 255, 0.1);
    }

    .editable-input {
      background: transparent;
      border: none;
      color: inherit;
      font: inherit;
      padding: 0;
      margin: 0;
      width: auto;
      min-width: 30px;
    }

    .editable-input:focus {
      outline: none;
      background: rgba(29, 155, 240, 0.1);
      border-radius: 4px;
    }

    .action-count {
      cursor: pointer;
      padding: 2px 4px;
      border-radius: 4px;
    }

    .action-count:hover {
      background: rgba(255, 255, 255, 0.1);
    }

    .video-duration.editable:hover {
      background: rgba(255, 255, 255, 0.2);
    }
  </style>
</head>
<body>
  <!-- Player Sidebar -->
  <div class="player-sidebar">
    <h2>Players</h2>
    <div class="players-list">
      <div class="player-item" data-player="joonasvirtanen">
        <img class="player-avatar active" src="https://unavatar.io/twitter/joonasvirtanen" alt="Joonas">
        <span class="player-name">Joonas</span>
      </div>
      <div class="player-item" data-player="wabi">
        <img class="player-avatar" src="wabi-avatar.jpg" alt="Wabi">
        <span class="player-name">Wabi</span>
      </div>
      <div class="player-item" data-player="ekuyda">
        <img class="player-avatar" src="https://unavatar.io/twitter/ekuyda" alt="ekuyda">
        <span class="player-name">ekuyda</span>
      </div>
      <div class="player-item" data-player="BlasMoros">
        <img class="player-avatar" src="https://unavatar.io/twitter/BlasMoros" alt="Blas">
        <span class="player-name">Blas</span>
      </div>
    </div>

    <div class="bg-settings">
      <h3>Canvas</h3>
      <div class="bg-option gradient-dark active" data-bg="gradient-dark" title="Dark"></div>
      <div class="bg-option gradient-purple" data-bg="gradient-purple" title="Purple"></div>
      <div class="bg-option gradient-blue" data-bg="gradient-blue" title="Blue"></div>
      <div class="bg-option gradient-warm" data-bg="gradient-warm" title="Warm"></div>
      <div class="bg-option media-echo" data-bg="media-echo" title="Media Echo"></div>
      <span class="bg-label">Echo</span>
    </div>
  </div>

  <div class="editor">
    <h1>Twitter Preview</h1>

    <div class="field">
      <label>Post Content</label>
      <textarea id="content" placeholder="What's happening?">jam with us

- high agency, low ego team
- design + interface building
- unlimited opus 4.5 credits

if you obsess over perceived performance, interaction design & typography dm me</textarea>
    </div>

    <div class="field">
      <label>Media</label>
      <div class="media-type-toggle">
        <button class="media-type-btn active" data-type="image">Image</button>
        <button class="media-type-btn" data-type="video">Video</button>
      </div>
      <input type="file" id="mediaInput" accept="image/*,video/*" style="display: none;">
      <button class="upload-btn" id="mediaUploadBtn" onclick="document.getElementById('mediaInput').click()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-5-7l-3 3.72L9 13l-3 4h12l-4-5z"/></svg>
        Upload Media
      </button>
      <button class="clear-media-btn hidden" id="clearMediaBtn">Clear Media</button>
    </div>
  </div>

  <div class="preview-container">
    <div class="preview-bg gradient-dark" id="previewBg"></div>
    <div class="media-echo-bg" id="mediaEchoBg"></div>
    <div class="preview-noise"></div>

    <div class="tweet">
      <div class="tweet-header">
        <img class="avatar" id="avatarPreview" src="https://unavatar.io/twitter/joonasvirtanen" alt="Avatar">
        <div class="tweet-header-content">
          <div class="tweet-header-top">
            <span class="display-name editable" id="displayNamePreview" data-field="displayName">Joonas Virtanen</span>
            <svg class="verified-badge" id="verifiedBadge" viewBox="0 0 22 22" fill="#1d9bf0">
              <path d="M20.396 11c-.018-.646-.215-1.275-.57-1.816-.354-.54-.852-.972-1.438-1.246.223-.607.27-1.264.14-1.897-.131-.634-.437-1.218-.882-1.687-.47-.445-1.053-.75-1.687-.882-.633-.13-1.29-.083-1.897.14-.273-.587-.704-1.086-1.245-1.44S11.647 1.62 11 1.604c-.646.017-1.273.213-1.813.568s-.969.854-1.24 1.44c-.608-.223-1.267-.272-1.902-.14-.635.13-1.22.436-1.69.882-.445.47-.749 1.055-.878 1.688-.13.633-.08 1.29.144 1.896-.587.274-1.087.705-1.443 1.245-.356.54-.555 1.17-.574 1.817.02.647.218 1.276.574 1.817.356.54.856.972 1.443 1.245-.224.606-.274 1.263-.144 1.896.13.634.433 1.218.877 1.688.47.443 1.054.747 1.687.878.633.132 1.29.084 1.897-.136.274.586.705 1.084 1.246 1.439.54.354 1.17.551 1.816.569.647-.016 1.276-.213 1.817-.567s.972-.854 1.245-1.44c.604.239 1.266.296 1.903.164.636-.132 1.22-.447 1.68-.907.46-.46.776-1.044.908-1.681s.075-1.299-.165-1.903c.586-.274 1.084-.705 1.439-1.246.354-.54.551-1.17.569-1.816zM9.662 14.85l-3.429-3.428 1.293-1.302 2.072 2.072 4.4-4.794 1.347 1.246z"/>
            </svg>
            <span class="username editable" id="usernamePreview" data-field="username">@joonasvirtanen</span>
          </div>
        </div>
        <div class="tweet-header-right">
          <button class="subscribe-btn">Subscribe</button>
          <div class="icon-btn">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8 0-1.85.63-3.55 1.69-4.9L16.9 18.31C15.55 19.37 13.85 20 12 20zm6.31-3.1L7.1 5.69C8.45 4.63 10.15 4 12 4c4.42 0 8 3.58 8 8 0 1.85-.63 3.55-1.69 4.9z"/></svg>
          </div>
          <div class="icon-btn">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M3 12c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm9 2c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm7 0c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"/></svg>
          </div>
        </div>
      </div>

      <div class="tweet-content" id="contentPreview">jam with us

- high agency, low ego team
- design + interface building
- unlimited opus 4.5 credits

if you obsess over perceived performance, interaction design & typography dm me</div>

      <div class="tweet-media hidden" id="mediaPreview">
        <img id="mediaImage" class="hidden" src="" alt="Media">
        <video id="mediaVideo" class="hidden" src="" muted></video>
        <div class="video-duration hidden editable" id="videoDurationPreview" data-field="videoDuration">0:02</div>
        <div class="video-play-icon hidden" id="videoPlayIcon"></div>
      </div>

      <div class="tweet-meta">
        <span class="editable" id="postTimePreview" data-field="postTime">4:36 PM</span>
        <span class="separator">·</span>
        <span class="editable" id="postDatePreview" data-field="postDate">Jan 30, 2026</span>
        <span class="separator">·</span>
        <span class="views-count editable" id="viewsPreview" data-field="views">9,551</span>
        <span>Views</span>
      </div>

      <div class="tweet-actions">
        <div class="action-item replies">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01zm8.005-6c-3.317 0-6.005 2.69-6.005 6 0 3.37 2.77 6.08 6.138 6.01l.351-.01h1.761v2.3l5.087-2.81c1.951-1.08 3.163-3.13 3.163-5.36 0-3.39-2.744-6.13-6.129-6.13H9.756z"/></svg>
          <span class="action-count editable" id="repliesPreview" data-field="replies">16</span>
        </div>
        <div class="action-item retweets">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M4.5 3.88l4.432 4.14-1.364 1.46L5.5 7.55V16c0 1.1.896 2 2 2H13v2H7.5c-2.209 0-4-1.79-4-4V7.55L1.432 9.48.068 8.02 4.5 3.88zM16.5 6H11V4h5.5c2.209 0 4 1.79 4 4v8.45l2.068-1.93 1.364 1.46-4.432 4.14-4.432-4.14 1.364-1.46 2.068 1.93V8c0-1.1-.896-2-2-2z"/></svg>
          <span class="action-count editable" id="retweetsPreview" data-field="retweets">7</span>
        </div>
        <div class="action-item likes">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M16.697 5.5c-1.222-.06-2.679.51-3.89 2.16l-.805 1.09-.806-1.09C9.984 6.01 8.526 5.44 7.304 5.5c-1.243.07-2.349.78-2.91 1.91-.552 1.12-.633 2.78.479 4.82 1.074 1.97 3.257 4.27 7.129 6.61 3.87-2.34 6.052-4.64 7.126-6.61 1.111-2.04 1.03-3.7.477-4.82-.561-1.13-1.666-1.84-2.908-1.91zm4.187 7.69c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"/></svg>
          <span class="action-count editable" id="likesPreview" data-field="likes">256</span>
        </div>
        <div class="action-item bookmarks">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M4 4.5C4 3.12 5.119 2 6.5 2h11C18.881 2 20 3.12 20 4.5v18.44l-8-5.71-8 5.71V4.5zM6.5 4c-.276 0-.5.22-.5.5v14.56l6-4.29 6 4.29V4.5c0-.28-.224-.5-.5-.5h-11z"/></svg>
          <span class="action-count editable" id="bookmarksPreview" data-field="bookmarks">101</span>
        </div>
        <div class="action-item share">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.59l5.7 5.7-1.41 1.42L13 6.41V16h-2V6.41l-3.3 3.3-1.41-1.42L12 2.59zM21 15l-.02 3.51c0 1.38-1.12 2.49-2.5 2.49H5.5C4.11 21 3 19.88 3 18.5V15h2v3.5c0 .28.22.5.5.5h12.98c.28 0 .5-.22.5-.5L19 15h2z"/></svg>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Player profiles data
    const players = {
      joonasvirtanen: {
        displayName: 'Joonas Virtanen',
        username: 'joonasvirtanen',
        avatar: 'https://unavatar.io/twitter/joonasvirtanen',
        verified: true
      },
      wabi: {
        displayName: 'Wabi',
        username: 'wabi',
        avatar: 'wabi-avatar.jpg',
        verified: true
      },
      ekuyda: {
        displayName: 'ekuyda',
        username: 'ekuyda',
        avatar: 'https://unavatar.io/twitter/ekuyda',
        verified: true
      },
      BlasMoros: {
        displayName: 'Blas Moros',
        username: 'BlasMoros',
        avatar: 'https://unavatar.io/twitter/BlasMoros',
        verified: true
      }
    };

    // Get elements
    const contentInput = document.getElementById('content');
    const mediaInput = document.getElementById('mediaInput');
    const contentPreview = document.getElementById('contentPreview');
    const avatarPreview = document.getElementById('avatarPreview');
    const verifiedBadge = document.getElementById('verifiedBadge');
    const mediaPreview = document.getElementById('mediaPreview');
    const mediaImage = document.getElementById('mediaImage');
    const mediaVideo = document.getElementById('mediaVideo');
    const videoDurationPreview = document.getElementById('videoDurationPreview');
    const videoPlayIcon = document.getElementById('videoPlayIcon');
    const mediaUploadBtn = document.getElementById('mediaUploadBtn');
    const clearMediaBtn = document.getElementById('clearMediaBtn');
    const previewBg = document.getElementById('previewBg');
    const mediaEchoBg = document.getElementById('mediaEchoBg');

    let currentMediaType = 'image';
    let currentBgMode = 'gradient-dark';
    let currentMediaSrc = null;

    // Background selection
    document.querySelectorAll('.bg-option').forEach(option => {
      option.addEventListener('click', () => {
        document.querySelectorAll('.bg-option').forEach(o => o.classList.remove('active'));
        option.classList.add('active');

        const bgType = option.dataset.bg;
        currentBgMode = bgType;

        // Update background classes
        previewBg.className = 'preview-bg ' + (bgType !== 'media-echo' ? bgType : 'gradient-dark');

        // Handle media echo
        if (bgType === 'media-echo' && currentMediaSrc) {
          mediaEchoBg.classList.add('active');
        } else {
          mediaEchoBg.classList.remove('active');
        }
      });
    });

    function updateMediaEcho(src) {
      currentMediaSrc = src;
      mediaEchoBg.style.backgroundImage = src ? `url(${src})` : 'none';

      if (currentBgMode === 'media-echo' && src) {
        mediaEchoBg.classList.add('active');
      } else {
        mediaEchoBg.classList.remove('active');
      }
    }

    // Player selection
    document.querySelectorAll('.player-item').forEach(item => {
      item.addEventListener('click', () => {
        const playerId = item.dataset.player;
        const player = players[playerId];

        // Update active state
        document.querySelectorAll('.player-avatar').forEach(a => a.classList.remove('active'));
        item.querySelector('.player-avatar').classList.add('active');

        // Update preview
        document.getElementById('displayNamePreview').textContent = player.displayName;
        document.getElementById('usernamePreview').textContent = '@' + player.username;
        avatarPreview.src = player.avatar;
        verifiedBadge.classList.toggle('hidden', !player.verified);
      });
    });

    // Inline editing for editable elements
    document.querySelectorAll('.editable').forEach(el => {
      el.addEventListener('click', () => {
        const currentValue = el.textContent;
        const field = el.dataset.field;

        // Create input
        const input = document.createElement('input');
        input.type = 'text';
        input.value = currentValue;
        input.className = 'editable-input';
        input.style.width = Math.max(el.offsetWidth, 40) + 'px';

        // Replace span with input
        el.textContent = '';
        el.appendChild(input);
        input.focus();
        input.select();

        const finishEdit = () => {
          let newValue = input.value || currentValue;

          // Add @ prefix for username if missing
          if (field === 'username' && !newValue.startsWith('@')) {
            newValue = '@' + newValue;
          }

          el.textContent = newValue;
        };

        input.addEventListener('blur', finishEdit);
        input.addEventListener('keydown', (e) => {
          if (e.key === 'Enter') {
            e.preventDefault();
            input.blur();
          }
          if (e.key === 'Escape') {
            input.value = currentValue;
            input.blur();
          }
        });
      });
    });

    // Content textarea sync
    contentInput.addEventListener('input', () => {
      contentPreview.textContent = contentInput.value;
    });

    // Media type toggle
    document.querySelectorAll('.media-type-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.media-type-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentMediaType = btn.dataset.type;

        if (currentMediaType === 'video') {
          mediaInput.accept = 'video/*';
        } else {
          mediaInput.accept = 'image/*';
        }
      });
    });

    // Media upload
    mediaInput.addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = (e) => {
          const isVideo = file.type.startsWith('video/');

          mediaPreview.classList.remove('hidden');
          clearMediaBtn.classList.remove('hidden');
          mediaUploadBtn.classList.add('has-file');
          mediaUploadBtn.innerHTML = '<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg> Media added';

          if (isVideo) {
            mediaImage.classList.add('hidden');
            mediaVideo.classList.remove('hidden');
            mediaVideo.src = e.target.result;
            videoDurationPreview.classList.remove('hidden');
            videoPlayIcon.classList.remove('hidden');

            // Get first frame for echo background
            mediaVideo.addEventListener('loadeddata', () => {
              const canvas = document.createElement('canvas');
              canvas.width = mediaVideo.videoWidth;
              canvas.height = mediaVideo.videoHeight;
              canvas.getContext('2d').drawImage(mediaVideo, 0, 0);
              updateMediaEcho(canvas.toDataURL());
            }, { once: true });
          } else {
            mediaVideo.classList.add('hidden');
            mediaImage.classList.remove('hidden');
            mediaImage.src = e.target.result;
            videoDurationPreview.classList.add('hidden');
            videoPlayIcon.classList.add('hidden');

            updateMediaEcho(e.target.result);
          }
        };
        reader.readAsDataURL(file);
      }
    });

    // Clear media
    clearMediaBtn.addEventListener('click', () => {
      mediaPreview.classList.add('hidden');
      mediaImage.classList.add('hidden');
      mediaImage.src = '';
      mediaVideo.classList.add('hidden');
      mediaVideo.src = '';
      videoDurationPreview.classList.add('hidden');
      videoPlayIcon.classList.add('hidden');
      clearMediaBtn.classList.add('hidden');
      mediaUploadBtn.classList.remove('has-file');
      mediaUploadBtn.innerHTML = '<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-5-7l-3 3.72L9 13l-3 4h12l-4-5z"/></svg> Upload Media';
      mediaInput.value = '';
      updateMediaEcho(null);
    });

    // Video playback - click to play fullscreen with sound
    mediaVideo.addEventListener('click', (e) => {
      e.stopPropagation();
      mediaVideo.muted = false;
      mediaVideo.controls = true;

      if (mediaVideo.requestFullscreen) {
        mediaVideo.requestFullscreen();
      } else if (mediaVideo.webkitRequestFullscreen) {
        mediaVideo.webkitRequestFullscreen();
      }

      mediaVideo.play();
    });

    // When exiting fullscreen, reset
    document.addEventListener('fullscreenchange', () => {
      if (!document.fullscreenElement) {
        mediaVideo.muted = true;
        mediaVideo.controls = false;
        mediaVideo.pause();
        mediaVideo.currentTime = 0;
      }
    });

    document.addEventListener('webkitfullscreenchange', () => {
      if (!document.webkitFullscreenElement) {
        mediaVideo.muted = true;
        mediaVideo.controls = false;
        mediaVideo.pause();
        mediaVideo.currentTime = 0;
      }
    });
  </script>
</body>
</html>
